---
title: '08-S3'
date: 2024/01/10
---

## 1. 객체 스토리지

- `객체 스토리지(Object Storage)`는 이름 그대로 데이터를 객체로 관리한다
- 하나의 객체는 이렇게 독립적으로 존재한다.

  - 객체는 무수히 많아질 수 있다.

- 하나의 객체는 `아이디`와 `데이터`, 그리고 `메타 데이터`를 포함한다.

객체 스토리지의 특징

- 방대한 확장성과 메타 데이터를 갖고 있다
- 규모와 유연성이 필요한 애플리케이션을 구축하는 데 적합
- 기존 데이터 스토어를 가져오는 데 사용 가능한데, **분석이나 백업 또는 아카이브 목적**으로 사용 가능
- 데이터를 **일부분만 수정하는 것이 불가능**함
  - 그래서 데이터 전체를 덮어써야 한다.

---

## 2. 파일 스토리지

- `파일 스토리지 (File Storage)` : 데이터를 파일로 관리한다.
- 파일 스토리지에는 **파일 시스템**이라는 것이 존재한다.
  - 그리고 그 안에 다양한 경로에 파일들이 존재한다.
  - 파일 스토리지의 특징 중 하는 파일들이 이렇게 계층으로 나눠져서 구성된다는 점이다.
  - e.g. Windows나 Mac OS에서 폴더 내에 파일이 존재하는 것
- 폴더 내에 또 다른 폴더가 존재할 수 있으며, 그 폴더 내에 여러 개의 파일들이 존재할 수 있다.

파일 스토리지의 특징

- **파일 시스템을 통해 데이터를 파일 단위로 저장**한다.
- **파일의 일부분만 수정이 가능**하다.
- 그래서 애플리케이션이 공유 파일에 액세스하거나 파일 시스템이 있어야 하는 경우에 적합
- e.g. NAS, 대규모 콘텐츠 레포지토리, 미디어 스토어, 그리고 사용자 홈 디렉터리 등

---

## 3. 블록 스토리지

- `블록 스토리지 (Block Storage)` : 데이터를 **블록**으로 관리한다.
  - cf. `블록` : 저장공간을 나누는 단위
- 블록 스토리지는 데이터를 작은 블록 단위로 저장하며, 각 블록은 고유한 주소 또는 식별자를 가진다.
- 블록 스토리지는 개별 가상 서버로 프로비저닝되기 때문에 **엄청나게 낮은 지연 시간을 제공**한다.
  - 그래서 **고성능 워크로드**에 사용하기에 적합하다.
- 주로 **데이터베이스 시스템, 가상 머신, 클라우드 스토리지** 등에서 사용
- 파일 시스템이나 메타데이터 없이 **순수한 데이터 블록만을 저장**한다.
  - cf. Elastic Block Store가 바로 이 블록 스토리지다.

---

## 4. 파일 스토리지 vs 객체 스토리지

|               파일 스토리지               |            객체 스토리지             |
| :---------------------------------------: | :----------------------------------: |
|         데이터를 파일 단위로 관리         |      데이터를 객체 단위로 관리       |
|        파일내용 일부분만 수정 가능        |   객체 데이터 일부분만 수정 불가능   |
| 운영체제에서 직접 접근 가능 (볼륨 마운트) |     운영체제에서 직접 접근 불가      |
|         큰 확장에 대처하기 어려움         |     큰 확장에 유연하게 대처 가능     |
|            사본 저장하지 않음             | 다수의 사본을 분산시켜 저장 (안정성) |

- `파일 스토리지` : 파일을 찾기 위해서는 **파일의 경로**를 알아야 한다.
  - e.g. `C:\MyFolder\hello.txt`
- `객체 스토리지` : 각 객체가 **고유한 아이디**를 갖고 있기 때문에, **해시 함수**를 통해 객체를 곧바로 찾을 수 있다.
  - e.g. `GET /hello.txt`
  - 객체 스토리지는 depth가 1인 tree라고 이해하면 된다.

---

## 5. S3

- Simple Storage Service의 약자
- 처음에 아마존에서 수많은 상품의 이미지를 저장하기 위해서 만들어졌다고 함
- AWS 클라우드 스토리지 유형
  - `S3 (Simple Storage Service)` : 객체 스토리지
  - `EFS (Elastic File System)` : 파일 스토리지
  - `EBS (Elastic Block Store)` : 블록 스토리지

필요에 따라 적합한 유형의 스토리지를 선택해서 사용하면 된다.

---

### 5.1 S3 특징

- 객체 기반의 무제한 파일 저장 스토리지
- URL을 통해 손쉽게 파일 공유 가능
- 99%의 내구성
- 사용한 만큼만 지불(GB당 과금)
- 정적 웹사이트 호스팅 가능

---

### 5.2 타 AWS 서비스들과 통합

S3는 다른 AWS 서비스들과 쉽게 통합해서 사용할 수 있다.

- DynamoDB, Lambda, Redshift, EMR, Data Pipeline, Kinesis 등의 서비스들과의 통합을 지원한다.
- S3는 주로 수정이 잘 일어나지 않는 **최종 파일**을 저장하는 용도로 사용한다.
  - 객체 스토리지의 특성상 파일의 일부분만 수정이 불가능하기 때문에,
- S3는 빠른 속도로 Read/Write를 해야 하는 경우 부적합하다.
- 그래서 적합한 용도로는 이미지, 동영상, 음악, 문서 등의 미디어 파일을 보관하거나 로그파일을 보관하기에 적합하다.
- 또한 다른 AWS 서비스의 데이터를 백업하는 등의 데이터 백업에도 적합하며,
  - 정적 웹 호스팅을 위해서도 사용하기 좋다.

---

### 5.3 S3 관련 용어

- `Bucket` : Object를 담는 최상위 단위미 (이름, 개수 제한있음)
  - cf. 한국말로 ‘양동’이라는 뜻
- `Object` : Bucket에 담는 데이터의 단위 (파일)
  - 우리가 흔히 파일이라고 부르는 것이 S3에서는 객체이다.
  - Bucket 안에 존재하는 것이 바로 객체
- `Metadata` : Object에 대한 여러가지 정보를 담고있는 데이터
- `Policy` : Bucket과 Object에 대한 접근을 통제하는 권한 정보

---

### 5.4 S3 사용방법

1. 가장 먼저 Bucket 생성한다.
   - (그래야 데이터를 저장할 수 있기 때문)
2. HTTP로 Bucket에 파일 업로드한다.
   - (업로드된 파일은 Object로 Bucket 내에 저장됨)
3. Object에 권한을 설정해야 한다.
   - (이 권한에 따라 외부 서비스 및 사용자의 Object 접근 가능 여부가 달라짐)
4. HTTP로 Bucket에서 파일 다운로드받아서 사용한다

---

### 5.5 S3의 스토리지 클래스

S3 스토리지 클래스 종류

- S3 Standard
- S3 Intelligent-Tiering
- S3 Standard-IA
- S3 One Zone-IA
- S3 Glacier Flexible Retrieval
- S3 Glacier Deep Archive
- S3 Glacier Instant Retrieval
- S3 on Outposts

스토리지 클래스는 스토리지를 저장하는 형태를 의미한다. <br />어떤 스토리지 클래스를 사용하는지에 따라서 요금이 크게 달라진다.

> 💡 주요 스토리지 클래스
>
> 자주 액세스하는 객체를 위한 스토리지 클래스
>
> - `Standard` : 기본 스토리지 클래스
>   - 최소 3개의 가용 영역(AZ)에 데이터를 저장
>   - 자주 액세스하는 데이터를 위해 높은 내구성, 가용성 및 성능을 갖춘 객체 스토리지를 제공
>
> 자주 액세스하지 않는 객체를 위한 스토리지 클래스
>
> - `Standard-IA (Infrequent Access)`
>   - 여러 개의 가용 영역에 중복 저장(고가용성, 복원력 있음)
>   - 자주 액세스하지 않지만 필요할 때 빠르게 액세스해야 하는 데이터에 적합
>   - Standard 클래스와 마찬가지로,
>     - 최소 3개의 가용 영역에 객체를 중복으로 저장함으로써 고가용성 및 복원력을 갖고 있다
> - `One Zone-IA (Infrequent Access)`
>   - 하나의 가용 영역에만 데이터를 저장 (Standard-IA 비해 저렴, 복원력 없음)
> - IA는 **Infrequent Access**의 약자로, 자주 접근하지 않는다는 의미

---

### 5.6 S3 Glacier

- S3에는 Glacier라는 스토리지 클래스가 있다.
  - Glacier라는 단어는 우리 말로 **빙하**라는 뜻
- 즉, `Glacier`는 **자주 접근하지 않는 데이터를 빙하에 보관하는 용도의 스토리지 클래스**다.
- **데이터 아카이빙을 위한 백업 스토리지**이며 무제한 확장성을 제공
- Glacier는 주로 백업 및 아카이빙 용도의 **Cold 데이터**를 저장하는 용도로 사용하며,
- 매우 낮은 비용으로 데이터를 저장할 수 있다.

---

### 5.7 S3 객체 라이프사이클 관리

![s3_object_lifecycle](https://raw.githubusercontent.com/berenickt/image-server/main/img/s3_object_lifecycle.jpeg)

- 먼저 처음에는 객체를 **Standard** 클래스로 저장한다.
  - 최근에 업로드 된 데이터는 자주 접근할 확률이 높기 때문
- 30일 경과한 이후에 데이터에 자주 접근하지 않게 되면, **Standard-IA**로 스토리지 클래스를 변경한다.
  - 그렇게 되면 GB당 요금이 Standard 클래스에 비해 **약 45% 저렴**해진다.
- 또 30일 지나서 데이터를 아카이빙 하기 위한 목적으로 **Glacier** 클래스로 변경한다.
  - 그렇게 되면 GB당 요금이 Standard-IA에 비해 **약 67% 저렴**해지며,
  - Standard 클래스에 비해서는 **약 82%나 저렴**해진다.
- AWS에서 제작한 S3 소개 영상 링크 : https://www.youtube.com/watch?v=77lMCiiMilo&feature=youtu.be

---

## 6. (실습) S3 버킷 생성

---

## 7. (실습) S3 버킷에 파일 업로드 및 다운로드

---

## 8. (실습) S3 버킷에 폴더 생성

---

## 9. (실습) Cyberduck으로 S3 다루기

---

## 10. (실습) S3 정적 웹 호스팅

---

## 11. (실습) S3 버킷 삭제

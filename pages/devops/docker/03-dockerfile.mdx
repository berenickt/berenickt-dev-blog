---
title: '03-Dockerfile 명령어'
date: 2024/02/05
---

## 1. Dockerfile이란?

- Dockerfile은 Docker 이미지 설정 파일
- **Dockerfile에 설정된 내용대로 이미지를 생성**함
- `<명령> <매개 변수>` 형식으로 작성

---

## 2. FROM

```dockerfile
# FROM <이미지>:<태그>
FROM ubuntu
FROM ubuntu:22.04
```

- 어떤 이미지를 기반으로 이미지를 생성할지 설정
- 이미지 이름만 설정하면 latest를 사용

---

## 3. MAINTAINER

```dockerfile
# MAINTAINER <작성자 정보>
MAINTAINER    Hong, Gildong <gd@yuldo.com>
```

- 이미지를 생성한 사람의 정보를 설정

---

## 4. RUN

```dockerfile
# RUN <명령> 형식
# 셸 스크립트 구문을 사용 가능
RUN apt install -y nginx
RUN echo "Hello Docker" > /tmp/hello
RUN git clone https://github.com/docker/docker.git
```

- FROM에서 설정한 이미지 위에서 스크립트 혹은 명령을 실행

---

## 5. CMD

```dockerfile
# CMD <명령> 형식
# 컨테이너가 시작되었을 때 스크립트 혹은 명령을 실행
# CMD는 Dockerfile에서 한 번만 사용 가능
CMD touch /home/hello/hello.txt
```

---

## 6. ENTRYPOINT

```dockerfile
# ENTRYPOINT <명령> 형식
# 컨테이너가 시작되었을 때 스크립트 혹은 명령을 실행
# ENTRYPOINT는 Dockerfile에서 한 번만 사용 가능
ENTRYPOINT touch /home/hello/hello.txt
```

---

## 7. EXPOSE

```dockerfile
# EXPOSE <포트 번호> 형식
# 호스트와 연결할 포트 번호를 설정
EXPOSE 80 443
```

---

## 8. ENV

```dockerfile
# ENV <환경 변수> <값> 형식
# 환경 변수를 설정 (ENV로 설정한 환경 변수는 RUN, CMD, ENTRYPOINT에 적용)
# 환경 변수를 사용할 때는 $를 사용
ENV HELLO 1234
CMD echo $HELLO
```

---

## 9. ADD

```dockerfile
# ADD <복사할 파일 경로> <이미지에서 파일이 위치할 경로> 형식
# 파일을 이미지에 추가
ADD hello-entrypoint.sh /entrypoint.sh
```

---

## 10. COPY

```dockerfile
# COPY <복사할 파일 경로> <이미지에서 파일이 위치할 경로> 형식
# 파일을 이미지에 추가
# ADD와는 달리 COPY는 압축을 해제하지 않고, 파일 URL도 사용할 수 없음
COPY hello-entrypoint.sh /entrypoint.sh
```

---

## 11. VOLUME

```dockerfile
# VOLUME <컨테이너 디렉터리> 또는 VOLUME ["컨테이너 디렉터리 1", "컨테이너 디렉터리2"] 형식
# 디렉터리의 내용을 컨테이너에 저장하지 않고 호스트에 저장하도록 설정
VOLUME /data
VOLUME ["/data", "/var/log/hello"]
```

---

## 12. USER

```dockerfile
# USER <계정 사용자명> 형식
# 명령을 실행할 사용자 계정을 설정
USER nobody
```

---

## 13. WORKDIR

```dockerfile
# WORKDIR <경로> 형식
# RUN, CMD, ENTRYPOINT의 명령이 실행될 디렉터리를 설정
WORKDIR /var/www
```

---

## 13. ONBUILD

```dockerfile
# ONBUILD <Dockerfile 명령> <Dockerfile 명령의 매개 변수> 형식
# 생성한 이미지를 기반으로 다른 이미지가 생성될 때 명령을 실행
ONBUILD RUN touch /hello.txt
ONBUILD ADD world.txt /world.txt
```

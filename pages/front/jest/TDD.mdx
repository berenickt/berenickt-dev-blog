---
title: 'React í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD)'
date: 2023/01/08
---

# 1. í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD)

## 1.1 Test Driven Development(TDD)

- ì‹¤ì œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì „ì— í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¨¼ì € ì‘ì„±
- í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•œ í›„ **ê·¸ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ Pass í•  ìˆ˜ ìˆëŠ” ì‹¤ì œ ì½”ë“œë¥¼ ì‘ì„±**

---

# 1.2 TDDë¥¼ í•˜ë©´ ì¢‹ì€ ì 

- TDDë¥¼ í•˜ë©´, ì½”ë“œì— ì•ˆì •ê°ì´ ë¶€ì—¬
- ê°œë°œí•˜ëŠ”ë° ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” ë¶€ë¶„ì€ ë””ë²„ê¹… ë¶€ë¶„ì´ë¼ì„œ, TDDë¥¼ ì‚¬ìš©í•˜ë©´ ë””ë²„ê¹… ì‹œê°„ì´ ì¤„ì–´ë“¤ê³  ê°œë°œ ì‹œê°„ë„ ì¤„ì–´ë“¬
- ì†ŒìŠ¤ ì½”ë“œ í•˜ë‚˜í•˜ë‚˜ë¥¼ ë”ìš± ì‹ ì¤‘í•˜ê²Œ ì§¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê¹¨ë—í•œ ì½”ë“œê°€ ë‚˜ì˜¬ í™•ë¥ ì´ ë†’ìŒ

---

# 2. React Testing Library

Create React Appë¡œ ë¦¬ì•¡íŠ¸ ì•±ì„ ìƒì„±í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í…ŒìŠ¤íŒ… í•  ë•Œ, React Testing Libraryë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

- Airbnbì—ì„œ ë§Œë“  Enzymeì„ ëŒ€ì²˜í•˜ëŠ” ì†”ë£¨ì…˜
  - cf. `Enzyme` : ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ì†”ë£¨ì…˜ , êµ¬ì„± ìš”ì†Œì˜ ì„¸ë¶€ ì •ë³´ë¥¼ í…ŒìŠ¤íŠ¸
  - ì°¨ì´ì 
    - `Enzyme` : êµ¬í˜„ ì£¼ë„ í…ŒìŠ¤íŠ¸ (Implementation Driven Test)
    - `React Testing Library` : í–‰ìœ„ ì£¼ë„ í…ŒìŠ¤íŠ¸ (Behavior Driven Test)
- React êµ¬ì„± ìš”ì†Œ ì‘ì—…ì„ ìœ„í•œ APIë¥¼ ì¶”ê°€í•˜ì—¬ DOM Testing Library ìœ„ì— êµ¬ì¶•
- DOM Testing Libraryë€ Dom ë…¸ë“œ(Node)ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ê°€ë²¼ìš´ ì†”ë£¨ì…˜
- **Create React Appìœ¼ë¡œ ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” React Testing Libraryë¥¼ ì§€ì›**
- ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° npmìœ¼ë¡œ ì¶”ê°€
  - `npm install --save-dev @testing-library/react`
- cf. [React Testing Library ê³µì‹ë¬¸ì„œ](https://testing-library.com/docs/react-testing-library/intro/)

---

# 3. Jest

- FaceBookì´ ë§Œë“¤ì–´ì§„ í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬
- React Testing Libraryì™€ ê°™ì´ ê°™ì´ ì‚¬ìš©ë¨
- ìµœì†Œí•œì˜ ì„¤ì •ìœ¼ë¡œ ë™ì‘í•˜ë©° Test Caseë¥¼ ë§Œë“¤ì–´ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œê°€ ì˜ ëŒì•„ê°€ëŠ”ì§€ í™•ì¸
- ë‹¨ìœ„ (Unit) í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œ ì´ìš©
- **Create React Appìœ¼ë¡œ ìƒì„±ëœ í”„ë¡œì íŠ¸ëŠ” Jestë¥¼ ì§€ì›**
- ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° npmìœ¼ë¡œ ì¶”ê°€
  - `npm install jest --save-dev`
- Jestê°€ Test íŒŒì¼ì„ ì°¾ì„ ë–„ ë‹¤ìŒ ì´ë¦„ ê·œì¹™ì„ ê°€ì§„ íŒŒì¼ ë“±ì€ ì „ë¶€ Test íŒŒì¼ë¡œ íŒë‹¨í•¨
  - `íŒŒì¼ëª….test.js`
  - `íŒŒì¼ëª….spec.js`
  - `tests í´ë”` ì•ˆì— ë“¤ì–´ìˆëŠ” íŒŒì¼
- cf. [Jest ê³µì‹ë¬¸ì„œ](https://jestjs.io/)

---

## 3.1 Jest íŒŒì¼ êµ¬ì¡°

```sh
ğŸ“¦ describe # ì—¬ëŸ¬ ê´€ë ¨ í…ŒìŠ¤íŠ¸ë¥¼ ê·¸ë£¹í™”í•˜ëŠ” ë¸”ë¡
â”œâ”€Â test(it) # ê°œë³„ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê³³. ê° í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì€ ë¬¸ì¥ì²˜ëŸ¼ ì„¤ëª…
â”‚Â Â â”œâ”€Â expect # ê°’ì„ í…ŒìŠ¤íŠ¸í•  ë•Œë§ˆë‹¤ ì‚¬ìš©,
â”‚Â Â â”œâ”€Â # expect í•¨ìˆ˜ í˜¼ìì„œëŠ” ê±°ì˜ ì‚¬ìš© ë˜ì§€ ì•Šìœ¼ë©° matcherì™€ í•¨ê»˜ ì‚¬ìš©
â”‚Â Â â””â”€Â matcher # ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ê°’ì„ í…ŒìŠ¤íŠ¸ í•  ë•Œ ì‚¬ìš©
â”œâ”€Â test(it)
â”œâ”€Â test(it)
â””â”€Â test(it)
```

---

### 3.1.1 test(it) ì˜ˆì‹œ

```sh
ğŸ“¦ describe ê³¼ì¼
â””â”€Â it ì‚¬ê³¼
â””â”€Â it ë°”ë‚˜ë‚˜
```

---

### 3.1.2 expect, matcher ì˜ˆì‹œ

```js
test("2+2ëŠ” 4ì„", () => {
  expect(2 + 2).toBe(4); // toBe(4) ë¶€ë¶„ì´ matcher
})

test("2+2ëŠ” 5ê°€ ì•„ë‹˜", () => {
  expect(2 + 2)not.toBe(4); // not.toBe(4) ë¶€ë¶„ì´ matcher
})
```

---

## 3.2 CRA Test

- Create React Appìœ¼ë¡œ ìƒì„±ëœ í”„ë¡œì íŠ¸ì˜ `App.test.js`ê°€ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë˜ëŠ” ê³³ì„
- `npm test`ë¡œ ì‹¤í–‰
  - ì‹¤í–‰í•´ë³´ë©´ aë¥¼ ëˆ„ë¥´ë©´ ì „ì²´ ì‹¤í–‰
  - që¥¼ ëˆ„ë¥´ë©´ ë¹ ì ¸ë‚˜ì˜¬ ìˆ˜ ìˆìŒ

```jsx
// App.test.js
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  // ** render : DOMì— ì»´í¬ë„ŒíŠ¸ë¥¼ ëœë”ë§í•˜ëŠ” í•¨ìˆ˜
  // ì¸ìë¡œ ëœë”ë§í•  React ì»´í¬ë„ŒíŠ¸ê°€ ë“¤ì–´ê°
  render(<App />);

  // renderì˜ ì¸ìë¡œ ë“¤ì–´ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì— learn reactë¼ëŠ” í…ìŠ¤íŠ¸ê°€ ë“¤ì–´ìˆëŠ”ì§€ ì—†ëŠ”ì§€ í…ŒìŠ¤íŠ¸
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});
```

---

## 3.3 ì¿¼ë¦¬ í•¨ìˆ˜

- cf. [Testing Library ê³µì‹ ë¬¸ì„œ About Queries](https://testing-library.com/docs/queries/about/)
- ì¿¼ë¦¬ëŠ” í˜ì´ì§€ì—ì„œ ìš”ì†Œë¥¼ ì°¾ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” ë°©ë²•
- ì—¬ëŸ¬ ìœ í˜•ì˜ ì¿¼ë¦¬(`"get", "find", "query"`)ê°€ ì¡´ì¬
- ìƒí™©ì— ë§ê²Œ ì ì ˆí•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•¨

### 3.3.1 get, find, query

`getBy...`

- ì¿¼ë¦¬ì— ëŒ€í•´ ì¼ì¹˜í•˜ëŠ” ë…¸ë“œë¥¼ ë°˜í™˜í•˜ê³  ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ì—†ê±°ë‚˜ ë‘˜ ì´ìƒì˜ ì¼ì¹˜ê°€ ë°œê²¬ë˜ë©´, **ì˜¤ë¥˜ë¥¼ ë°œìƒ**
- ë‘˜ ì´ìƒì˜ ìš”ì†Œê°€ ì˜ˆìŒë˜ëŠ” ê²½ìš°ì—ëŠ” ëŒ€ì‹  getAllBy ì‚¬ìš©

---

`findBy...`

- ì£¼ì–´ì§„ ì¿¼ë¦¬ì™€ ì¼ì¹˜í•˜ëŠ” ìš”ì†Œê°€ ë°œê²¬ë˜ë©´ **Promiseë¥¼ ë°˜í™˜**
- ìš”ì†Œ ê°€ ë°œê²¬ë˜ì§€ ì•Šê±°ë‚˜ ê¸°ë³¸ ì œí•œ ì‹œê°„ì¸ 1000ms í›„ì— ë‘˜ ì´ìƒì˜ ìš”ì†Œê°€ ë°œê²¬ë˜ë©´ ì•½ì†ì´ ê±°ë¶€
- ë‘˜ ì´ ìƒì˜ ìš”ì†Œë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ” ê²½ìš° findAllByë¥¼ ì‚¬ìš©
- getBy + waitFor = findBy

---

`queryBy...`

- ì¿¼ë¦¬ì— ëŒ€í•´ ì¼ì¹˜í•˜ëŠ” ë…¸ë“œë¥¼ ë°˜í™˜ í•˜ê³  ì¼ì¹˜í•˜ëŠ” **ìš”ì†Œê°€ ì—†ìœ¼ë©´ nullì„ ë°˜í™˜**
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ìš”ì†Œë¥¼ ì–´ì„¤ì…˜í•˜ëŠ”ë° ìœ ìš©
- ë‘˜ ì´ìƒì˜ ì¼ì¹˜ í•­ëª©ì´ ë°œê²¬ë˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒ
- í™•ì¸ëœ ê²½ìš° ëŒ€ì‹  queryAllBy ì‚¬ìš©

---

`"waitFor`

- ì¼ì • ê¸°ê°„ ë™ì•ˆ ê¸°ë‹¤ë ¤ì•¼ í•  ë•Œ waitForë¥¼ ì‚¬ìš©
- ê¸°ëŒ€ê°€ í†µê³¼í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆìŒ

---

### 3.3.2 ì •ë¦¬

cf. https://testing-library.com/docs/queries/about/#types-of-queries

|     Type of Query     |   0 Matches   |    1 Match     |  >1 Matches  | Retry (Async/Await) |
| :-------------------: | :-----------: | :------------: | :----------: | :-----------------: |
|  **Single Element**   |               |                |              |                     |
|      `getBy...`       |  Throw error  | Return element | Throw error  |         No          |
|     `queryBy...`      | Return `null` | Return element | Throw error  |         No          |
|      `findBy...`      |  Throw error  | Return element | Throw error  |         Yes         |
| **Multiple Elements** |               |                |              |                     |
|     `getAllBy...`     |  Throw error  |  Return array  | Return array |         No          |
|    `queryAllBy...`    |  Return `[]`  |  Return array  | Return array |         No          |
|    `findAllBy...`     |  Throw error  |  Return array  | Return array |         Yes         |

---

# 4. CRAì—ì„œ eslint

cf. ë¦¬ì•¡íŠ¸ ê°œë°œí•  ë–„, Create React Appì—ì„œëŠ”ê¸°ë³¸ eslintê°€ ì„¤ì •ìˆìŒ

- í•˜ì§€ë§Œ, VS Codeì—ì„œ ë°”ë¡œ ì—ëŸ¬ í™•ì¸í•  ìˆ˜ ì—†ê³ ,
- ì•±ì„ ì‹œì‘í–ˆì„ ë•Œ í„°ë¯¸ë„ ìƒì—ì„œ ë³¼ ìˆ˜ ìˆìŒ

ëŒ€ì‹  `package.json`ì— **eslintConfig ë¶€ë¶„ ì§€ìš°ê³ **

- `.eslintrc.json` íŒŒì¼ ìƒì„±í•˜ë©´,
- PROBELMS íƒ­ì—ì„œ ESLintì—ì„œ ì£¼ëŠ” ê¸°ë³¸ì ì¸ ê²½ê³ ë“¤ì„ í™•ì¸ ê°€ëŠ¥

```json
// .eslintrc.json
{
  "extends": ["react-app", "react-app/jest"]
}
```

---

## 4.1 eslint í”ŒëŸ¬ê·¸ì¸

eslintì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ì§€ ì•ŠëŠ” ë‹¤ì–‘í•œ ê·œì¹™ì„ í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ ì‚¬ìš© ê°€ëŠ¥

- e.g. reactì— ê´€ë ¨ëœ ë¦°íŠ¸ì„¤ì •ì„ ìœ„í•´ì„œëŠ” eslintplugin-reactë¥¼ ì‚¬ìš©
- e.g. react hooksì— ê´€ë ¨ ê·œì¹™ì„ ì ìš©í•˜ë ¤ë©´ eslint-plugin-react-hooksë¥¼ ì‚¬ìš©
- `eslint-plugin-testing-library`
  - renderë¡œ Dom ê·¸ë¦¬ëŠ” ë¶€ë¶„
- `eslint-plugin-jest-dom`
  - expect-matcherë¡œ í…ŒìŠ¤íŠ¸

```sh
npm install eslint-plugin-testing-library eslint-plugin-jest-dom
```

---

### 4.1.1 ë‚´ë¶€ ì„¤ì •

```json
// .eslintrc.json
{
  "plugins": ["testing-library", "jest-dom"],
  "extends": ["react-app", "react-app/jest", "plugin:testing-library/react", "plugin:jest-dom/recommend"]
}
```

- `plugins í•­ëª© `
  - í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€ ì¶”ê°€í•  ë•Œ, eslint-plugin- ë¶€ë¶„ ìƒëµê°€ëŠ¥
- `extends í•­ëª©`
  - í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•œ í›„ì— ê·œì¹™ì„ ì •í•´ì¤˜ì•¼ ì‚¬ìš©ê°€ëŠ¥
  - extends í•­ëª©ì— ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ê·œì¹™ì„ ì„¤ì •
  - vue, angular, react ì¤‘ reactë¥¼ ìœ„í•œ ê·œì¹™ recommendedëŠ” ì¶”ì²œì´ ë˜ëŠ” ê±¸ ì‚¬ìš©
